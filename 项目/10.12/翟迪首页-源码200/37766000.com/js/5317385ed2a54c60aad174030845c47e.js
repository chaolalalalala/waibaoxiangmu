app.factory("actionService",["$http","$q",function(n,t){function e(){var n=-1,t,i;return navigator.appName=="Microsoft Internet Explorer"&&(t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),i.exec(t)!=null&&(n=parseFloat(RegExp.$1))),n}var i={getLeaderboard:{type:"POST",dependent:[],globalName:null,url:"/Home/GetBettingPotData"},"jquery.cycle2.js":{type:"text/javascript",dependent:[],globalName:"$.fn.cycle",url:"http://cdn.aliucdn.com:8888/Web.Portal/_Common/Scripts/jquery.cycle2.js"},"jquery.cycle2.carousel.js":{type:"text/javascript",dependent:["jquery.cycle2.js"],globalName:"$.fn.cycle.transitions.carousel",url:"http://cdn.aliucdn.com:8888/Web.Portal/_Common/Scripts/jquery.cycle2.carousel.js"}},f=function(){return i},r={},s=function(lib){var dependentList=[],actionRule=f(),deferred,i;if(r[lib])return r[lib];if(deferred=t.defer(),r[lib]=deferred.promise,actionRule[lib].dependent.length>0){for(i=0;i<actionRule[lib].dependent.length;i++)dependentList.push(o.name+'("'+actionRule[lib].dependent[i]+'")');t.all(eval("["+dependentList.join(",")+"]")).then(function(n){deferred.resolve(n)},function(n){deferred.reject(n)})}else deferred.resolve(lib);return deferred.promise},u={},o=function(n){var r=f(),i;return u[n]?u[n]:(i=t.defer(),u[n]=i.promise,r[n]?s(n).then(function(){var actionRuleString='["'+r[n].globalName.replace(".",'"]["')+'"]',script;eval("!window"+actionRuleString)?e()<0||e()>8?(script=document.createElement("script"),script.type=r[n].type,script.src=r[n].url,script.onload=function(){i.resolve("load"+n)},document.body.appendChild(script)):$.getScript(r[n].url,function(){i.resolve("load"+n)}):i.resolve(n+"already load")},function(){i.reject(n)}):i.reject(n),i.promise)};return{GET:function(r){var f,u,e;return r=""+r,f=null,u=t.defer(),f=u.promise,e=i[r].url,n.get(e).success(function(n){u.resolve(n)}).error(function(n){u.reject(n)}),f},POST:function(r,u){var e=null,f=t.defer(),o,s;return e=f.promise,r=""+r,o=i[r].url,s=u||{},n.post(o,s).success(function(n){f.resolve(n)}).error(function(n){f.reject(n)}),e},addLibrary:function(n){var u=null,r=t.defer();return u=r.promise,i[n]&&i[n].type==="text/javascript"?o(n).then(function(n){r.resolve(n)},function(n){r.reject(n)}):r.reject("Please ensure your library in our action-list!"),u}}}]);app.factory("bodyScrollService",["$http",function(){var n=function(){var n=$(window).height(),t=$(document).height(),i=$(document).scrollTop();return t-(i+n)};return{getDistanceOfBottom:n}}]);app.factory("captchaService",["$http","$q",function(n,t){var i=null;return{post:function(r){if(i)return i;var u=t.defer();return i=u.promise,r?n.post("/Home/GetCaptchaFor"+r).success(function(n){var t=n.value,r="data:image/png;base64,"+n.image;u.resolve({checkCodeEncrypt:t,image:r});i=null}):n.post("/GetCaptcha").success(function(n){var t=n.value,r="data:image/png;base64,"+n.image;u.resolve({checkCodeEncrypt:t,image:r});i=null}),i.success=function(n){return i.then(function(t){n(t.checkCodeEncrypt,t.image)}),i},i}}}]);app.factory("DataService",["$rootScope",function(n){var t={Count:"0"};return n.$broadcast("getCount"),{getValue:function(){return t},setValue:function(n){return t.Count=n,t}}}]);app.factory("detectionRobotService",["$http","$q","$window","labelService",function(n,t,i,r){return{randomBlock:function(){var n=[{method:"prompt",pass:!1,turnOn:Math.random()>Math.random()?!0:!1}];return n.sort(function(){return Math.random()>.5?-1:1}),n},methodPerfer:function(n){var t={prompt:[{message:r.get("DetectionRobot.prompt1"),value:"Account"},{message:r.get("DetectionRobot.prompt2"),value:"Password"},{message:r.get("DetectionRobot.prompt3"),value:"MoneyPassword"}]},i=Math.floor(Math.random()*t[n].length);return{id:i,message:t[n][i].message,value:t[n][i].value}},execMethod:function(n,t,i){var r=this.methodPerfer(t.method);i({quest:r,dialogInstanse:{}})},detectionRobot:function(r){var f=this,u=t.defer(),e=function(){for(var t=f.randomBlock(),e=!0,n=0;n<t.length;n++){if(t[n].turnOn?f.execMethod(n,t[n],function(u){u.dialogInstanse=i[t[n].method](u.quest.message);switch(t[n].method){case"confirm":t[n].pass=u.dialogInstanse===u.quest.value?!0:!1;break;case"prompt":t[n].pass=u.dialogInstanse===r[u.quest.value]?!0:!1;break;default:t[n].pass=!0}e=e&&t[n].pass}):(t[n].pass=!0,e=e&&t[n].pass),!e){u.reject(r);break}n+1===t.length&&e&&u.resolve(r)}};return n.post("/Home/GetRobotQuestionRegisterSetting",{}).then(function(n){n&&""+n.data=="true"?e():u.resolve(r)},function(){u.reject(r)}),u.promise}}}]);angular.module("slotGame",[]).factory("FishGameService",["$http","$q",function(n,t){var i={search:{},take:15,pageIndex:0};return{getFishList:function(){var r=null,u=t.defer();return r=u.promise,n.post("/Game/GetFishGames",i).success(function(n){u.resolve(n)}),r},toFishGame:function(n,t){var i,r;switch(t){case 6:i="/Account/LoginToAg?lunchGame=6&gamecategory=36";r="Ag";break;case 11:case 33:i="/Account/LoginToPtGroup?categoryType=1&gamecode="+n;r="Pt";break;case 18:i="/Account/LoginToUg?isMobile=false&gameId=101";r="Ug";break;case 22:case 36:i="/Account/LoginToMw?gameId="+n;r="Mw";break;case 26:i="/Account/LoginToJdb?gameId="+n+"&isMobile=false";r="Jdb";break;case 14:i="/Account/LoginToGns?gameId="+n+"&isFish=true";r="Gns";break;case 37:i="/Account/LoginToPg?gameId="+n+"&isFish=true";r="Pg"}return{action:i,supplier:r}}}}]);app.factory("labelService",["labels","$parse",function(n,t){return{get:function(i){return t(i)(n)}}}]);angular.module("liveGame",[]).factory("LiveGameService",[function(){return{toLiveGame:function(n,t){var i,r;switch(t){case 11:case 33:i="/Account/LoginToPtGroup?categoryType=0&gamecode="+n;r="Pt";break;case 12:i="/Account/LoginToGpiLiveGame?gameId="+n;r="Gpi";break;case 34:case 39:i="/Account/LoginToSunbet?gameId="+n+"&isMobile=false";r="Sunbet"}return{action:i,supplier:r}}}}]);angular.module("lobbyNav",[]).factory("LobbyNavService",["$window","$location","LobbyNavSizeService",function(n,t,i){function e(n){var e=r[0].size,o=u,s=i.getEachSiteSetting(n),t;if(s)e=s;else for(t=0;t<r.length;t++)if(r[t].gameSupplierType===n){e=r[t].size;break}for(t=0;t<f.length;t++)if(f[t]===n){o=!1;break}return{windowSize:e,windowEmbedded:o}}function o(n){localStorage.setItem("LobbyNavAction",n);var t=document.createEvent("Event");t.initEvent("setActionEvent",!0,!0);window.dispatchEvent(t)}var u=!0,f=["Bb","Ag","Ab","Eg","Gd","Gns","Gpi","Ig","Jdb","Pt","Pg","Sg","RedTiger","Sunbet","Saba","Sing","Mw","Guide"],r=[{gameSupplierType:"Default",size:{width:1300,height:960}}];return{openLobbyNav:function(t,i,r){function l(){var n=(screen.width-s)/2,t=(screen.height-h)/3;f.resizeTo(s,h);f.moveTo(n,t);f.focus()}var f,c,s,h,a=r?r:"lobby";c=e(i);s=c.windowSize.width;h=c.windowSize.height;embedded=u==!1?!1:c.windowEmbedded;embedded&&n.addEventListener?(o(t),n.top.location.pathname!=="/Lobby/Navigation"?(f=n.open("/Lobby/Navigation","_lobbyNav","resizable,scrollbars=yes, width="+s+", height="+h),l()):(f=n.top,l())):(f=n.open(t,"_NonEmbedded","resizable,scrollbars=yes, width="+s+", height="+h),l())}}}]);angular.module("lobbyNav").factory("LobbyNavSizeService",[function(){var n=[{gameSupplierType:"Default",size:null}];return{getEachSiteSetting:function(t){for(var i=0;i<n.length;i++)if(n[i].gameSupplierType===t)return n[i].size;return n[0].size}}}]);angular.module("reviewGame",[]).factory("ReviewGameService",function(){return{review:function(n,t,i,r){var u=JSON.parse(localStorage.getItem("reviewGame"))||[],f={ButtonImagePath:n,DisplayName:t,GameId:i,GameSupplierType:r};u.length>0?(u=$.grep(u,function(n){return JSON.stringify(n.GameId)!==JSON.stringify(f.GameId)}),u.unshift(f),u.length>25&&u.pop(),localStorage.setItem("reviewGame",JSON.stringify(u))):(u.unshift(f),localStorage.setItem("reviewGame",JSON.stringify(u)))}}}),function(){if($.hubConnection){var t=$.hubConnection(),n=t.createHubProxy("mainHub");n.on("signOut",function(n){n&&alert(n);location.href="/Account/SignOut"}).on("refresh",function(){location.reload()});app.factory("signalrService",["$rootScope","$q",function(i,r){var u=r.defer();return{connect:function(){t.start().done(function(){u.resolve()})},on:function(t,r){u.promise.then(function(){n.on(t,function(){var n=arguments;i.$apply(function(){r&&r.apply(this,n)})});var u=i.$$childTail;u.$on("$destroy",function(){n.off(t)})})},invoke:function(){var t=arguments;u.promise.then(function(){n.invoke.apply(n,t)})},donePromise:u.promise,getConnectionId:function(){return""}}}])}}();angular.module("slotGame").factory("SlotGameService",[function(){return{toSlotGame:function(n,t){var i,r,u,f;switch(t){case 1:i="/Account/LoginToBB?bbpagesite=4";r="Bb";break;case 6:i="/Account/LoginToAg?lunchGame=6&gamecategory=36";r="Ag";break;case 9:i="/Account/LoginToMg2?lunchGame=0&gameId="+n;r="Mg";break;case 11:case 33:i="/Account/LoginToPtGroup?categoryType=1&gamecode="+n;r="Pt";break;case 12:i="/Account/LoginToGpiSlotGame?gameId="+n;r="Gpi";break;case 14:i=n=="M4-0075"?"/Account/LoginToGns?gameId="+n+"&isFish=true":"/Account/LoginToGns?gameId="+n+"&isFish=false";r="Gns";break;case 15:i="/Account/LoginToPrg?gameId="+n+"&isMobile=false";r="Prg";break;case 16:i="/Account/LoginToSg?gameId="+n+"&isMobile=false";r="Sg";break;case 18:i="/Account/LoginToUg?isMobile=false&gameId=101";r="Ug";break;case 22:case 36:i="/Account/LoginToMw?gameId="+n;r="Mw";break;case 27:i="/Account/LoginToHaba?gameId="+n+"&isMobile=false";r="Haba";break;case 26:i="/Account/LoginToJdb?gameId="+n+"&isMobile=false";r="Jdb";break;case 30:u="";$.each(n,function(n,t){u=u+"&"+n+"="+t});u=u.slice(1,u.length);i="/Account/LoginToNetEnt?"+u+"&isMobile=false";r="NetEnt";break;case 28:f="";angular.forEach(n,function(n,t){f=f+"&"+t+"="+n});f=f.slice(1,f.length);i="/Account/LoginToCq9?"+f+"&GamePlat=WEB";r="Cq9";break;case 34:case 39:i="/Account/LoginToRedTiger?gameId="+n+"&isMobile=false";r="RedTiger";break;case 35:i="/Account/LoginToGameArt?gameId="+n;r="GameArt";break;case 37:i="/Account/LoginToPg?gameId="+n;r="Pg"}return{action:i,supplier:r}}}}])