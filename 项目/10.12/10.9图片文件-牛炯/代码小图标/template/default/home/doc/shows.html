

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>动说科技开发文档_V1.0</title>
	<meta name="description" content="动说科技开发文档" />
	<link href='__EXT__/doc/css/style.css?t=1451964198000' rel='stylesheet' type='text/css'>
	<link href="__EXT__/doc/css/document.css?t=1451964198000" rel="stylesheet" />

	<link rel="stylesheet" href="__EXT__/doc/css/docco.css?t=1451964198000">

	<script src="__EXT__/doc/js/jquery-1.7.1.min.js?t=1451964198000" type="text/javascript"></script>

	<script src="__EXT__/doc/js/highlight.pack.js?t=1451964198000"></script>

	<script src="__EXT__/doc/js/jquery.ztree.core-3.5.min.js?t=1451964199000" type="text/javascript"></script>
	<link href="__EXT__/doc/css/zTreeStyle.css?t=1451964199000" rel="stylesheet" />
	<script type="text/javascript" src="__EXT__/doc/js/marked.js?t=1468881669000"></script>
	<style type="text/css">
		.zt_footer{
			line-height: 60px;
		}
	</style>
</head>
<body>
<div class="zt_header">
	动说科技开发文档
	<span>V1.0</span>
		<span class="zt_download">
			Powered By <a href="http://team.oschina.net" target="_blank">Team@OSC</a> |
			<a href="?p=show&v=27235" target="_blank" title="下载当前文档">下载文档</a>
		</span>
</div>
<div class="zt_main">
	<div class="zt_navi">
		<div class="zt_navi_inner">
			<div class="ztree" id="zt_navi_tree">
			</div>
		</div>
	</div>
	<div class="zt_content">
		<div class="zt_content_inner" id="zt_text">
		</div>
	</div>
</div>
<script type="text/javascript" src="__EXT__/doc/js/d.js?t=1453329166000"></script>
<script type="text/javascript">
	share({
		text: document.title,
		url: window.location.href,
		desc:'快来分享吧'
	});
	var setting = {
		view: {
			selectedMulti: false
		},
		callback: {
			beforeClick: beforeClick,
			onClick: onClick
		}
	};

	function beforeClick(treeId, treeNode, clickFlag) {
		if (treeNode.isParent) {
			zTree.expandNode(treeNode);
			return false;
		}else if(!treeNode.isText){
			return false;
		}
		return true;
	}

	function onClick(event, treeId, treeNode, clickFlag) {
		if (!treeNode.isParent) {
			if(treeNode.isText){
				loadText(treeNode.id);
			}
		}
	}

	function loadText(id){
		$("#zt_text").html("<p>加载中……</p>");
		var host = window.location.host;

		var	domain = "http://move1.a.com/doc/move/id/4";

		$("#zt_text").load(domain + "&p=text&t="+id, function(){
			resizePicF();
		});
	}
	var zTree;
	$(document).ready(function(){
		$.ajax({
			url: "http://move1.a.com/doc/node_list?vId=27235&id=0",
			dataType: "json",
			success: function(data){
				var zNodes = data.nodes;
				zTree = $.fn.zTree.init($("#zt_navi_tree"), setting, zNodes);
				var currentId = data.firstId;
				loadText(currentId);
				var node = zTree.getNodeByParam("id", currentId);
				zTree.selectNode(node);
			}
		});
	});

	//计算图片的真实大小，如果超过编辑区域，则进行限制
	var resizePicWidth = function(selector, pic_width){
		$(selector + " img").each(function(){
			var img = $(this);
			var realWidth;	//真实的宽度
			var realHeight;		//真实的高度
			//这里做下说明，$("<img/>")这里是创建一个临时的img标签，类似js创建一个new Image()对象！
			$("<img/>").attr("src", $(img).attr("src")).load(function() {
				/*
				 如果要获取图片的真实的宽度和高度有三点必须注意
				 1、需要创建一个image对象：如这里的$("<img/>")
				 2、指定图片的src路径
				 3、一定要在图片加载完成后执行如.load()函数里执行
				 */
				realWidth = this.width;
				realHeight = this.height;
				//如果真实的宽度大于规定的宽度就按照100%显示
				if(realWidth>=pic_width){
					$(img).css("width", (pic_width) + "px");
				} else{//如果小于浏览器的宽度按照原尺寸显示
					$(img).css("width",realWidth+'px');
				}
			});
		});
	};

	var resizePicF = function(){
		var cw = $("#zt_text")[0].clientWidth - 50;
		resizePicWidth("#zt_text", cw);
	}

</script>
</body>
</html>
<!-- Generated by OsChina.NET (init:0[ms],page:3[ms],ip:61.183.228.177) -->